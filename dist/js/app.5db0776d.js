(function(e){function t(t){for(var n,u,a=t[0],i=t[1],c=t[2],p=0,d=[];p<a.length;p++)u=a[p],Object.prototype.hasOwnProperty.call(s,u)&&s[u]&&d.push(s[u][0]),s[u]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);l&&l(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==s[i]&&(n=!1)}n&&(o.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},s={app:0},o=[];function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=i;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("6a90")},bcd5:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v("Group Project Peer Evaluation")]),r("form",{on:{submit:function(t){return t.preventDefault(),e.submit(t)}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.submitter,expression:"submitter"}],attrs:{type:"text",name:"student",id:"student",placeholder:"Your Name",required:""},domProps:{value:e.submitter},on:{input:function(t){t.target.composing||(e.submitter=t.target.value)}}}),r("br"),r("br"),r("label",{attrs:{for:"peer"}},[e._v("Please select your course: ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.course,expression:"course"}],attrs:{name:"course",id:"course",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.course=t.target.multiple?r:r[0]}}},[r("option",{attrs:{disabled:"",value:""}},[e._v("Please select your course")]),r("option",{attrs:{value:"comp905"}},[e._v("COMP 905")]),r("option",{attrs:{value:"comp66"}},[e._v("COMP 66")])]),r("br"),r("br"),r("label",{attrs:{for:"peer"}},[e._v("Please select a peer: ")]),"comp905"===e.course?r("select",{directives:[{name:"model",rawName:"v-model",value:e.userId,expression:"userId"}],attrs:{name:"peer",id:"peer",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.userId=t.target.multiple?r:r[0]}}},[r("option",{attrs:{disabled:"",value:""}},[e._v("Please select a peer")]),e._l(e.comp905Users,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2):e._e(),"comp66"===e.course?r("select",{directives:[{name:"model",rawName:"v-model",value:e.userId,expression:"userId"}],attrs:{name:"peer",id:"peer",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.userId=t.target.multiple?r:r[0]}}},[r("option",{attrs:{disabled:"",value:""}},[e._v("Please select a peer")]),e._l(e.comp66Users,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])}))],2):e._e(),e._l(e.questions,(function(t,n){return r("div",{key:n,staticClass:"feedback"},[r("h3",[e._v(e._s(t.prompt))]),e._l(t.options,(function(s,o){return r("div",{key:o,staticClass:"option"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.responses[n],expression:"responses[index]"}],attrs:{type:"radio",id:"option"+(o+1)},domProps:{value:{optionId:s.id,questionId:t.id,submitter:e.submitter,userId:e.userId},checked:e._q(e.responses[n],{optionId:s.id,questionId:t.id,submitter:e.submitter,userId:e.userId})},on:{change:function(r){return e.$set(e.responses,n,{optionId:s.id,questionId:t.id,submitter:e.submitter,userId:e.userId})}}}),r("label",{attrs:{for:"option"+(o+1)}},[e._v(e._s(s.value))]),r("br")])}))],2)})),r("input",{staticStyle:{"margin-top":"30px",width:"200px"},attrs:{type:"submit",value:"Submit"}})],2)])},s=[],o=(r("ed03"),r("643f"),r("27c4"),r("d136"),r("b2bf")),u=r("3f24"),a={data:function(){return{questionOperationsDoc:"\n                query QuestionQuery {\n                    questions {\n                    id\n                    prompt\n                    options {\n                        id\n                        questionId\n                        value\n                    }\n                    }\n                }\n            ",userOperationsDoc:"\n                query UserQuery {\n                    users {\n                    id\n                    name\n                    course\n                    }\n                }\n            ",userId:null,submitter:null,course:null,comp905Users:[],comp66Users:[],questions:[],responses:[]}},created:function(){this.startFetchQuestionQuery(),this.startFetchUserQuery()},methods:{submit:function(){var e,t=Object(u["a"])(this.responses);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(!r)return void alert("You must select a response for all questions")}}catch(o){t.e(o)}finally{t.f()}var n=JSON.stringify(this.responses);n.replace(/\\"/g,"ï¿¿"),n=n.replace(/"([^"]+)":/g,"$1:").replace(/\uFFFF/g,'\\"');var s="\n                mutation ResponsesMutation {\n                    insert_responses(objects: ".concat(n,") {\n                        affected_rows\n                    }\n                }\n            ");this.startExecuteResponsesMutation(s)},fetchGraphQL:function(e,t,r){return Object(o["a"])(regeneratorRuntime.mark((function n(){var s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://survey-f20.hasura.app/v1/graphql",{method:"POST",body:JSON.stringify({query:e,variables:r,operationName:t})});case 2:return s=n.sent,n.next=5,s.json();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},fetchQuestionQuery:function(){return this.fetchGraphQL(this.questionOperationsDoc,"QuestionQuery",{})},startFetchQuestionQuery:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Called"),t.next=3,e.fetchQuestionQuery();case 3:r=t.sent,n=r.errors,s=r.data,n&&console.error(n),e.questions=s.questions;case 8:case"end":return t.stop()}}),t)})))()},executeResponsesMutation:function(e){return this.fetchGraphQL(e,"ResponsesMutation",{})},startExecuteResponsesMutation:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.executeResponsesMutation(e);case 2:if(n=r.sent,s=n.errors,o=n.data,!s){r.next=9;break}return console.error(s),alert("There was an error submitting your data, please try again"),r.abrupt("return");case 9:console.log(o),alert("Success, please complete this form for each of your group members (including yourself)."),location.reload();case 12:case"end":return r.stop()}}),r)})))()},fetchUserQuery:function(){return this.fetchGraphQL(this.userOperationsDoc,"UserQuery",{})},startFetchUserQuery:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,s,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchUserQuery();case 2:r=t.sent,n=r.errors,s=r.data,n&&console.error(n),o=Object(u["a"])(s.users);try{for(o.s();!(a=o.n()).done;)i=a.value,"comp905"===i.course?e.comp905Users.push(i):"comp66"===i.course&&e.comp66Users.push(i)}catch(c){o.e(c)}finally{o.f()}case 8:case"end":return t.stop()}}),t)})))()}}},i=a,c=r("0892"),l=Object(c["a"])(i,n,s,!1,null,null,null);t["a"]=l.exports}});
//# sourceMappingURL=app.5db0776d.js.map